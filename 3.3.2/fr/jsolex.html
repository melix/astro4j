<!DOCTYPE html>
<html lang="">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="CÃ©dric Champeau">
<title>JSol&#8217;Ex</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="highlight/styles/equilibrium-light.min.css">
<style>
    .badge {
        display: inline-block;
        padding: 5px 10px;
        font-size: 18px;
        font-weight: bold;
        color: #fff;
        background-color: #007bff;
        border-radius: 10px;
        text-align: center;
    }
    a:link, .badge a:visited {
        text-decoration: none;
    }
</style>
<script defer data-domain="melix.github.io" src="https://analytics.champeau.me/js/script.js"></script>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>JSol&#8217;Ex</h1>
<div class="details">
<span id="author" class="author">CÃ©dric Champeau</span><br>
<span id="revnumber">version 3.3.2</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_tÃ©lÃ©chargement">TÃ©lÃ©chargement</a>
<ul class="sectlevel2">
<li><a href="#_fichiers_zips">Fichiers zips</a></li>
<li><a href="#_compilation_depuis_les_sources">Compilation depuis les sources</a></li>
</ul>
</li>
<li><a href="#_communautÃ©">CommunautÃ©</a></li>
<li><a href="#donate">Dons</a></li>
<li><a href="#_traitement_dune_vidÃ©o">Traitement d&#8217;une vidÃ©o</a></li>
<li><a href="#_paramÃ¨tres_damÃ©lioration_de_limage">ParamÃ¨tres d&#8217;amÃ©lioration de l&#8217;image</a>
<ul class="sectlevel2">
<li><a href="#_correction_des_bords_dentelÃ©s">Correction des bords dentelÃ©s</a></li>
</ul>
</li>
<li><a href="#_paramÃ¨tres_dobservation">ParamÃ¨tres d&#8217;observation</a></li>
<li><a href="#_autres_paramÃ¨tres_disponibles">Autres paramÃ¨tres disponibles</a></li>
<li><a href="#force-polynomial">Forcer le polynÃ´me</a></li>
<li><a href="#modele-noms-fichier">ModÃ¨les de noms de fichier</a></li>
<li><a href="#_lancer_un_traitement">Lancer un traitement</a>
<ul class="sectlevel2">
<li><a href="#_affichage_des_images_produites">Affichage des images produites</a></li>
</ul>
</li>
<li><a href="#_mode_surveillance_de_rÃ©pertoire">Mode surveillance de rÃ©pertoire</a></li>
<li><a href="#custom_images">Personnalisation des images gÃ©nÃ©rÃ©es</a></li>
<li><a href="#imagemath">ImageMath : scripts de calcul d&#8217;images</a>
<ul class="sectlevel2">
<li><a href="#_introduction_Ã _imagemath">Introduction Ã  ImageMath</a></li>
<li><a href="#_les_fonctions_dimagemath">Les fonctions d&#8217;ImageMath</a></li>
<li><a href="#custom-functions">Fonctions personnalisÃ©es</a></li>
<li><a href="#includes">Inclure d&#8217;autres scripts</a></li>
<li><a href="#remote-scriptgen">GÃ©nÃ©ration de script Ã  distance</a></li>
<li><a href="#_scripts_imagemath">Scripts ImageMath</a></li>
</ul>
</li>
<li><a href="#trimming-ser-files">RÃ©duire la taille des fichiers SER</a></li>
<li><a href="#batch-mode">Traitement par lots</a>
<ul class="sectlevel2">
<li><a href="#_passage_en_revue_des_images_traitÃ©es_en_lot">Passage en revue des images traitÃ©es en lot</a></li>
<li><a href="#script-batch">Extensions d&#8217;ImageMath disponibles en mode batch</a></li>
<li><a href="#_scripts_indÃ©pendants">Scripts indÃ©pendants</a></li>
</ul>
</li>
<li><a href="#_mesures">Mesures</a>
<ul class="sectlevel2">
<li><a href="#_mesures_de_dÃ©calage_vers_le_rouge">Mesures de dÃ©calage vers le rouge</a></li>
<li><a href="#_mesures_avec_lanalyseur_de_vidÃ©o">Mesures avec l&#8217;analyseur de vidÃ©o</a></li>
<li><a href="#_application_au_calcul_de_dÃ©calage_de_la_raie_hÃ©lium">Application au calcul de dÃ©calage de la raie hÃ©lium</a></li>
</ul>
</li>
<li><a href="#stacking-and-mosaic">Empilement et crÃ©ation de mosaiques</a></li>
<li><a href="#_calculatrice_dexposition_optimale">Calculatrice d&#8217;exposition optimale</a></li>
<li><a href="#_explorateur_de_spectre">Explorateur de spectre</a>
<ul class="sectlevel2">
<li><a href="#_identification_automatique">Identification automatique</a></li>
</ul>
</li>
<li><a href="#_serveur_web_embarquÃ©">Serveur Web embarquÃ©</a></li>
<li><a href="#_remerciements">Remerciements</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody"><div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Vous regardez la documentation d&#8217;une ancienne version.
TÃ©lÃ©chargez la derniÃ¨re version <a href="https://melix.github.io/astro4j/latest/fr/jsolex.html" class="bare">ici</a></p>
</div>
</td>
</tr>
</table>
<div class="paragraph">
<p>JSol&#8217;Ex est un traitement d&#8217;images solaires produites par l&#8217;intermÃ©diaire du <a href="http://www.astrosurf.com/solex/">Sol&#8217;Ex de Christian Buil</a>.
Il permet de traiter les fichiers SER capturÃ©s avec cet instrument pour produire des images du disque solaire, de maniÃ¨re similaire Ã  <a href="http://valerie.desnoux.free.fr/inti/">INTI de ValÃ©rie Desnoux</a>.
S&#8217;il est principalement conÃ§u pour traiter les images produites par Sol&#8217;Ex, il est possible qu&#8217;il donne de bons rÃ©sultats sur d&#8217;autres hÃ©liospectrographes.</p>
</div>
<div class="paragraph">
<p>JSol&#8217;Ex est un logiciel libre sous licence Apache 2, Ã©crit en Java et fourni Ã  titre gratuit sans aucune garantie.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Note aux utilisateurs franÃ§ais</div>
<div class="paragraph">
<p><strong>Si vous votez Rassemblement National ou tout autre parti proche de l&#8217;extrÃªme droite, je vous demande de ne pas utiliser ce logiciel</strong></p>
</div>
<div class="paragraph">
<p>Mes convictions sont diamÃ¨tralement opposÃ©es Ã  celles de ces partis et je ne souhaite pas que mon travail, dÃ©veloppÃ© sur mon temps libre avec une licence libre serve Ã  des personnes qui soutiennent ces idÃ©es nausÃ©abondes.</p>
</div>
<div class="paragraph">
<p>La solidaritÃ©, le partage, l&#8217;ouverture aux autres, la lutte contre les discriminations et les inÃ©galitÃ©s, le respect de toutes les religions, de tous les genres sont les valeurs qui m&#8217;animent. Elles sont Ã  l&#8217;opposÃ© de celles prÃ´nÃ©es par ces partis.</p>
</div>
<div class="paragraph">
<p>Je vous invite Ã  ne pas cÃ©der aux sirÃ¨nes de la haine et Ã  vous tourner vers des valeurs plus positives, oÃ¹ votre bien-Ãªtre ne passe pas par le rejet de l&#8217;autre.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tÃ©lÃ©chargement">TÃ©lÃ©chargement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cliquez sur le bouton correspondant Ã  votre systÃ¨me ci-dessous pour tÃ©lÃ©charger l&#8217;installeur de JSol&#8217;Ex :</p>
</div>
<div class="paragraph">
<p><a href="https://jsolex.s3.eu-west-3.amazonaws.com/jsolex-windows-latest/jsolex-3.3.2.msi" class="badge"><span class="icon"><i class="fa fa-windows"></i></span> JSol&#8217;Ex (Windows)</a>
<a href="https://jsolex.s3.eu-west-3.amazonaws.com/jsolex-ubuntu-latest/jsolex_3.3.2_amd64.deb" class="badge"><span class="icon"><i class="fa fa-linux"></i></span> JSol&#8217;Ex (Linux)</a>
<a href="https://jsolex.s3.eu-west-3.amazonaws.com/jsolex-macos-latest/jsolex-3.3.2.pkg" class="badge"><span class="icon"><i class="fa fa-apple"></i></span> JSol&#8217;Ex (Mac ARM64)</a>
<a href="https://jsolex.s3.eu-west-3.amazonaws.com/jsolex-macos-13/jsolex-3.3.2.pkg" class="badge"><span class="icon"><i class="fa fa-apple"></i></span> JSol&#8217;Ex (Mac Intel)</a></p>
</div>
<div class="sect2">
<h3 id="_fichiers_zips">Fichiers zips</h3>
<div class="paragraph">
<p>Certains utilisateurs prÃ©fÃ¨reront tÃ©lÃ©charger un fichier zip contenant les binaires: sans installeur, ils suffit de dÃ©compresser le fichier zip dans un rÃ©pertoire de votre choix et de lancer l&#8217;application (dans le dossier <code>bin</code>, <code>jsolex.bat</code> sous Windows, <code>jsolex</code> sous Linux et MacOS).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://jsolex.s3.eu-west-3.amazonaws.com/jsolex-windows-latest/jsolex-3.3.2.zip">ZIP JSol&#8217;Ex (Windows)</a></p>
</li>
<li>
<p><a href="https://jsolex.s3.eu-west-3.amazonaws.com/jsolex-ubuntu-latest/jsolex-3.3.2.zip">ZIP JSol&#8217;Ex (Linux)</a></p>
</li>
<li>
<p><a href="https://jsolex.s3.eu-west-3.amazonaws.com/jsolex-macos-latest/jsolex-3.3.2.zip">ZIP JSol&#8217;Ex (Mac ARM64)</a></p>
</li>
<li>
<p><a href="https://jsolex.s3.eu-west-3.amazonaws.com/jsolex-macos-13/jsolex-3.3.2.zip">ZIP JSol&#8217;Ex (Mac Intel)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_compilation_depuis_les_sources">Compilation depuis les sources</h3>
<div class="paragraph">
<p>JSol&#8217;Ex peut aussi Ãªtre tÃ©lÃ©chargÃ© ou installÃ© depuis les sources sur <a href="https://github.com/melix/astro4j/releases">cette page</a>.
Des installateurs sont disponibles pour Linux, Windows et MacOS.</p>
</div>
<div class="paragraph">
<p>Alternativement, vous pouvez lancer JSol&#8217;Ex en tÃ©lÃ©chargeant les sources puis en exÃ©cutant la commande:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew jsolex:run</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_communautÃ©">CommunautÃ©</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vous pouvez nous rejoindre sur notre <a href="https://discord.gg/y9NCGaWzve">serveur Discord</a> pour discuter de JSol&#8217;Ex, poser des questions, ou partager vos images.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://discord.gg/y9NCGaWzve"><img src="https://discordapp.com/api/guilds/1305595962663768074/widget.png?style=banner2" alt="widget"></a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="donate">Dons</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JSol&#8217;Ex est un logiciel gratuit, dÃ©veloppÃ© sur mon temps libre.
Si vous apprÃ©ciez mon travail, je n&#8217;accepte pas de dons directs.
Cependant, je vous encourage fortement Ã  soutenir l&#8217;<a href="https://www.helloasso.com/associations/single-tracking-astronomical-repository-for-open-spectroscopy/formulaires/3">association STAROS</a>, qui a initiÃ© les projets Sol&#8217;Ex et Sunscan et promeut la spectrographie Ã  travers des projets innovants avec des amateurs, des Ã©coles et des collaborations scientifiques.
Vos dons seront donc ma contribution Ã  ce projet et seront grandement apprÃ©ciÃ©s !</p>
</div>
<div class="paragraph">
<p>Cliquez sur le lien ci-dessous pour faire un don :</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://www.helloasso.com/associations/single-tracking-astronomical-repository-for-open-spectroscopy/formulaires/3"><img src="https://staros-projects.org/assets/img/backgrounds/STAROS_logo_text.png" alt="STAROS logo text" height="200"></a>
</div>
</div>
<div class="paragraph">
<p>Bien entendu, vous pouvez Ã©galement envoyer un message d&#8217;encouragement ou d&#8217;apprÃ©ciation, c&#8217;est toujours agrÃ©able Ã  recevoir !</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_traitement_dune_vidÃ©o">Traitement d&#8217;une vidÃ©o</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JSol&#8217;Ex ne peut traiter que les fichiers SER, vous devez donc configurer votre logiciel de capture pour utiliser ce format.
La fenÃªtre principale se prÃ©sente sous cette forme:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="main-window-fr.jpg" alt="main window fr">
</div>
</div>
<div class="paragraph">
<p>Dans le menu "Fichier", sÃ©lectionnez "Ouvrir un fichier SER".
Choisissez votre fichier, la fenÃªtre suivante devrait s&#8217;ouvrir:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="params-1-fr.jpg" alt="params 1 fr">
</div>
</div>
<div class="paragraph">
<p>Cette fenÃªtre est le point d&#8217;entrÃ©e de la configuration du traitement.
Vous pouvez prÃ©ciser:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la longueur d&#8217;onde d&#8217;observation: s&#8217;il n&#8217;est pas obligatore de remplir ce champ, le faire vous permettra de bÃ©nÃ©ficier de la coloration automatique. En cliquant sur les "&#8230;&#8203;" vous disposez de la possibilitÃ© d&#8217;ajouter vos propres raies si elles ne sont pas listÃ©es</p>
</li>
<li>
<p>dÃ©calage en pixels : par dÃ©faut, le logiciel trouve la raie la plus sombre dans l&#8217;image et calcule un polynÃ´me de second degrÃ© pour modÃ©liser cette raie. L&#8217;image est reconstituÃ©e en prenant les pixels au centre de la raie (dÃ©calage = 0). Il vous est possible d&#8217;entrer un dÃ©calage en pixels pour aller par exemple vers le continuum, ou trouver une raie plus difficile Ã  identifier (ex. HÃ©lium) Ã  partir de la raie la plus sombre.</p>
</li>
<li>
<p>le dÃ©calage Doppler est utilisÃ© uniquement lorsque vous observez en raie h-alpha pour gÃ©nÃ©rer une image Doppler. Par dÃ©faut, le logiciel utilise 2 images dÃ©calÃ©es de 3 pixels pour reconstituer une image en couleur.</p>
</li>
<li>
<p>Correction angle P : lorsque cette case est cochÃ©e, l&#8217;angle P du soleil sera calculÃ© automatiquement Ã  partir de la date d&#8217;observation (disponible dans le fichier SER). Les images seront automatiquement corrigÃ©es de cet angle, pour que le Nord soit bien en haut. Ce paramÃ¨tre n&#8217;affecte pas les images gÃ©nÃ©rÃ©es avec ImageMath, qui doivent faire leur propre correction.</p>
</li>
<li>
<p>Rotation : permet d&#8217;effectuer une rotation Ã  gauche ou Ã  droite (90 degrÃ©s) de l&#8217;image. Ceci peut par exemple Ãªtre utile dans le cas d&#8217;un scan fait en dÃ©clinaison, pour corriger l&#8217;orientation. Ce paramÃ¨tre n&#8217;affecte pas les images crÃ©es avec ImageMath.</p>
</li>
<li>
<p>Rognage : permet d&#8217;effectuer un rognage automatique de l&#8217;image aprÃ¨s correction gÃ©omÃ©trique. Il existe plusieurs modes:</p>
<div class="ulist">
<ul>
<li>
<p>Aucun: pas de rognage (par dÃ©faut)</p>
</li>
<li>
<p>Largeur d&#8217;origine : l&#8217;image sera redimensionnÃ©e dans un carrÃ© de la taille de la largeur de la vidÃ©o d&#8217;origine. IdÃ©al pour les disques solaires complets.</p>
</li>
<li>
<p>Rayon (x&#8230;&#8203;) : l&#8217;image sera redimensionnÃ©e en fonction du rayon du disque solaire, en appliquant un multiplicateur. Peut-Ãªtre utile par exemple lorsque le disque est tronquÃ© et que l&#8217;on veut avoir une image carrÃ©e permettant de "remettre" la portion Ã  sa place.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Forcer la valeur du tilt : lors de la correction gÃ©omÃ©trique d&#8217;image, JSol&#8217;Ex calcule une ellipse pour modÃ©liser le disque solaire reconstituÃ©. Cette ellipse est utilisÃ©e pour calculer des paramÃ¨tre comme l&#8217;angle de tilt. Si le calcul effectuÃ© par le logiciel est erronÃ©, vous disposez de la possibilitÃ© de surcharger la valeur calculÃ©e.</p>
</li>
<li>
<p>Forcer le rapport X/Y : de maniÃ¨re similaire, sur certaines images dans des raies difficiles, l&#8217;ellipse peut ne pas parfaitement correspondre au disque solaire et ne pas reconstituer un soleil parfaitement circulaire. Vous pouvez surcharger le rapport dÃ©tectÃ© pour corriger ces problÃ¨mes</p>
</li>
<li>
<p>Forcer le polynÃ´me: permet de forcer le polynÃ´me de second degrÃ© utilisÃ© pour modÃ©liser la raie spectrale. Voir la <a href="#force-polynomial">section sur le forÃ§age du polynÃ´me</a> pour plus d&#8217;informations.</p>
</li>
<li>
<p>Inverser l&#8217;axe horizontal/vertical : permet de retourner l&#8217;image verticalement et horizontalement pour avoir le Nord et l&#8217;Est bien orientÃ©s</p>
</li>
<li>
<p>Redimensionner au maximum: peut Ãªtre utilisÃ© si votre vidÃ©o est sur-Ã©chantillonnÃ©e et que vous souhaitez conserver la rÃ©solution maximum. Ceci arrive par exemple si vous faites des scans Ã  basse vitesse (ex, sidÃ©rale).</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Activer ce paramÃ¨tre peut produire des images sensiblement plus grandes et entraÃ®ner une forte pression mÃ©moire. Il n&#8217;est pas recommandÃ© d&#8217;activer ce paramÃ¨tre.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_paramÃ¨tres_damÃ©lioration_de_limage">ParamÃ¨tres d&#8217;amÃ©lioration de l&#8217;image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cette section permet de configurer les transformations qui seront appliqueÃ©s aux images de faÃ§on Ã  amÃ©liorer leur aspect esthÃ©tique.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="params-2-fr.jpg" alt="params 2 fr">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>ParamÃ¨tres CLAHE : permet de configurer l&#8217;algorithme d&#8217;amÃ©lioration de contraste CLAHE.
Il est possible de configurer la taille des tuiles utilisÃ©es pour calculer les histogrammes, la rÃ©solution de l&#8217;histogramme et le facteur de clipping.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Viennent ensuite les paramÃ¨tres de correction de bandes, qui permettent de corriger les bandes transversales qui peuvent apparaÃ®tre sur les images par exemple Ã  cause de poussiÃ¨res sur la fente.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Largeur de correction de bande : c&#8217;est la largeur des bandes qui sont utilisÃ©es pour l&#8217;algorithme de correction de transversallium. L&#8217;algorithme calcule la valeur moyenne des pixels dans ces bandes et corrige la luminositÃ© d&#8217;une ligne en fonction de cette valeur.</p>
</li>
<li>
<p>Nombre de passes de correction de bande : plus vous ferez de passes, plus il sera possible de corriger de gros dÃ©fauts, au prix d&#8217;une image moins contrastÃ©e et/ou moins lumineuse</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Une autre section permet de configurer la dÃ©convolution des images.
Par dÃ©faut, aucune dÃ©convolution n&#8217;est appliquÃ©e, mais vous pouvez choisir l&#8217;agorithme de dÃ©convolution et ses paramÃ¨tres.</p>
</div>
<div class="paragraph">
<p>Pour la dÃ©convolution de Richardson-Lucy, vous pouvez choisir la taille du PSF synthÃ©tique, le facteur sigma et le nombre d&#8217;itÃ©rations.</p>
</div>
<div class="paragraph">
<p>Enfin, vous pouvez choisir d&#8217;appliquer un filtre d&#8217;amÃ©lioration des dÃ©tails Ã  la fin du traitement. JSol&#8217;Ex propose trois options d&#8217;accentuation :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Aucune</strong> : Aucune accentuation n&#8217;est appliquÃ©e</p>
</li>
<li>
<p><strong>Aiguiser</strong> : Accentuation traditionnelle utilisant un noyau de convolution. Vous pouvez ajuster la taille du noyau (doit Ãªtre un nombre impair â¥ 3)</p>
</li>
<li>
<p><strong>Masque flou</strong> : Technique d&#8217;amÃ©lioration plus sophistiquÃ©e qui crÃ©e un masque Ã  partir de la diffÃ©rence entre l&#8217;original et une version floutÃ©e de l&#8217;image. Cette mÃ©thode produit gÃ©nÃ©ralement des rÃ©sultats d&#8217;aspect plus naturel avec une meilleure prÃ©servation des contours. Vous pouvez ajuster Ã  la fois la taille du noyau et la force de l&#8217;effet.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il est aussi possible d&#8217;appliquer une correction de vignettage.
3 modes de correction sont disponibles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Aucune correction : pas de correction appliquÃ©e</p>
</li>
<li>
<p>Flat artificiel : un modÃ¨le d&#8217;illumination du disque est calculÃ© automatiquement, en sÃ©lectionnant des pixels en excluant des percentiles haut/bas. Cette correction fonctionne bien pour des vignÃ©tages raisonnables.</p>
</li>
<li>
<p>Flat physique : le logiciel est capable d&#8217;utiliser un fichier SER contenant un petit nombre d&#8217;images, ou bien un flat prÃ©enregistrÃ©. Il appliquera alors la correction en fonction.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_correction_des_bords_dentelÃ©s">Correction des bords dentelÃ©s</h3>
<div class="paragraph">
<p>Ceci est une fonctionnalitÃ© expÃ©rimentale disponible depuis JSol&#8217;Ex 3.1.0.
Elle permet de corriger les bords dentelÃ©s qui peuvent apparaÃ®tre sur les images.
Ces bords dentelÃ©s sont frÃ©quents sur les images capturÃ©es avec un spectrohÃ©liographe et proviennent de diffÃ©rentes causes :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la turbulence atmosphÃ©rique</p>
</li>
<li>
<p>le vent</p>
</li>
<li>
<p>une monture qui n&#8217;est pas parfaitement Ã©quilibrÃ©e ou qui se trouve en rÃ©sonance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La correction de bords dentelÃ©s peut amÃ©liorer ces dÃ©fauts de maniÃ¨re spectaculaire.
Elle ne nÃ©cessite qu&#8217;un paramÃ¨tre : une valeur "sigma" qui permet d&#8217;adjuster le nombre de points pris en compte dans le modÃ¨le de correction.
Une valeur de sigma proche de 0 sera trÃ¨s restrictive et ne corrigera que les petits dÃ©fauts, tandis qu&#8217;une valeur de sigma plus Ã©levÃ©e corrigera des dÃ©fauts plus importants, au risque de dÃ©former des protubÃ©rances par exemple.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>La correction de bords dentelÃ©s peut avoir des effets de bord, tels que la dÃ©formation de protubÃ©rances. Il ne s&#8217;agit pas d&#8217;une correction parfaite de la turbulence atmosphÃ©rique : en effet, elle ne peut pas corriger les effets perpendiculaires Ã  la direction du scan par exemple. Enfin, elle fonctionnera d&#8217;autant mieux sur la turbulence "basse frÃ©quence", c&#8217;est-Ã -dire les mouvements lents de l&#8217;atmosphÃ¨re, et moins bien sur les mouvements rapides.
Dans tous les cas, il est recommandÃ© de commencer sans correction et de vÃ©rifier le rÃ©sultat dans tous les cas.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_paramÃ¨tres_dobservation">ParamÃ¨tres d&#8217;observation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les paramÃ¨tres d&#8217;observation sont utilisÃ©s lorsque vous enregistrez vos images au format FITS, pour remplir certaines mÃ©tadonnÃ©es.
Elles servent aussi Ã  calculer le graphique de longueur d&#8217;ondes.
A noter qu&#8217;Ã  ce stade, nous ne recommandons pas d&#8217;envoyer les images gÃ©nÃ©rÃ©es par JSol&#8217;Ex sur la base de donnÃ©es BASSS2000, les champs de mÃ©tadonnÃ©es entrÃ©s n&#8217;Ã©tant pas exactement les mÃªmes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="params-3-fr.jpg" alt="params 3 fr">
</div>
</div>
<div class="paragraph">
<p>Voici les champs disponibles dans JSol&#8217;Ex:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Observateur : personne qui a effectuÃ© l&#8217;observation</p>
</li>
<li>
<p>Adresse email : adresse e-mail de l&#8217;observateur</p>
</li>
<li>
<p>Instrument : prÃ©-rempli avec "Sol&#8217;Ex"</p>
</li>
<li>
<p>TÃ©lescope : votre lunette ou tÃ©lescope utilisÃ© avec votre Sol&#8217;Ex</p>
</li>
<li>
<p>Longueur focale et ouverture</p>
</li>
<li>
<p>Latitude et longitude du site d&#8217;observation</p>
</li>
<li>
<p>CamÃ©ra</p>
</li>
<li>
<p>Date : prÃ©-rempli avec les mÃ©tadonnÃ©es du fichier SER, en zone UTC</p>
</li>
<li>
<p>Binning : le binning appliquÃ© Ã  la camÃ©ra lors de l&#8217;acquisition</p>
</li>
<li>
<p>Taille des pixels : la taille des pixels de la camÃ©ra, en microns</p>
</li>
<li>
<p>Inversement haut/bas du spectre : normalement, le spectre doit avoir l&#8217;aile bleue en haut et l&#8217;aile rouge en bas. Si c&#8217;est l&#8217;inverse, vous pouvez cocher cette case. C&#8217;est typiquement le cas si vous utilisez un Sunscan.</p>
</li>
<li>
<p>Mode altazimutal : cochez cette case si vous n&#8217;utilisez pas une monture Ã©quatoriale mais une monture altazimutale et que vous constatez que l&#8217;orientation du disque est incorrecte.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Mode altazimutal et correction de l&#8217;orientation des images</div>
<div class="paragraph">
<p>Il est important de comprendre que JSol&#8217;Ex n&#8217;est pas capable de dÃ©terminer si une image est retournÃ©e verticalement ou horizontalement, mais il peut calculer l&#8217;angle solaire P Ã  partir de la date d&#8217;observation.
Cependant, la grille d&#8217;orientation qui est gÃ©nÃ©rÃ©e ne sera correcte que si vous utilisez une monture Ã©quatoriale.
Si vous utilisez une monture altazimutale, l&#8217;oritentation sera incorrecte, ainsi que la position des Ã©tiquettes des rÃ©gions actives dÃ©tectÃ©es.
Pour corriger cela, vous devez cocher la case "mode altazimutal" et entrer les coordonnÃ©es de votre site d&#8217;observation : JSol&#8217;Ex calculera alors l&#8217;angle parallactique et effectuera la correction automatiquement, donnant une image bien orientÃ©e.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_autres_paramÃ¨tres_disponibles">Autres paramÃ¨tres disponibles</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="params-4-fr.jpg" alt="params 4 fr">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Supposer vidÃ©o mono : si cette cache est cochÃ©e, JSol&#8217;Ex n&#8217;essaiera pas de faire un dÃ©matriÃ§age de la vidÃ©o d&#8217;entrÃ©e, ce qui permet d&#8217;accÃ©lÃ©rer considÃ©rablement les temps de traitement. En rÃ¨gle gÃ©nÃ©rale, vos vidÃ©os seront en mono, il est donc utile de conserver cette case cochÃ©e.</p>
</li>
<li>
<p>Enregistrement automatique des images : si cette case est cochÃ©e, toutes les images gÃ©nÃ©rÃ©es sont automatiquement enregistrÃ©es sur disque. Dans le cas contraire, vous devrez dans l&#8217;interface qui affiche les images gÃ©nÃ©rÃ©s appuyer sur le bouton "Enregistrer" pour conserver les images produites</p>
</li>
<li>
<p>GÃ©nÃ©rer des images de debug : permet de gÃ©nÃ©rer des images telles que la reconnaissance de contours, la reconnaissance d&#8217;ellipse/tilt, l&#8217;image moyenne. Utile pour vÃ©rifier si le logiciel ne se comporte pas correctement sur votre vidÃ©o et que vous souhaitez vÃ©rifier lÃ  oÃ¹ il se trompe</p>
</li>
<li>
<p>GÃ©nÃ©rer des fichiers FITS : permet de gÃ©nÃ©rer des fichiers FITS, non destructifs, en plus des images PNG</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="force-polynomial">Forcer le polynÃ´me</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JSol&#8217;Ex effectue une dÃ©tection de la raie spectrale en cherchant la ligne la plus sombre dans l&#8217;image, puis en ajustant un polynÃ´me de 3Ã¨me ordre.
Il arrive parfois que la dÃ©tection soit incorrecte, auquel cas vous pouvez forcer l&#8217;utilisation d&#8217;un polynÃ´me.
Pour ce faire, cliquez sur le bouton "forcer le polynÃ´me", qui vous permettra d&#8217;entrer les coefficients du polynÃ´me.</p>
</div>
<div class="paragraph">
<p>Le format du polynÃ´me est une liste de 4 nombres entre accolades, sÃ©parÃ©s par des virgules, par exemple: <code>{1.3414109042116584E-10,3.889927699830093E-5,-0.056529799336687114,35.76051527062038}</code>.</p>
</div>
<div class="paragraph">
<p>La faÃ§on la plus simple d&#8217;obtenir les coefficients du polynÃ´me est de cliquer sur les "&#8230;&#8203;" qui ouvrira une fenÃªtre avec l&#8217;image moyenne et la raie spectrale dÃ©tectÃ©e :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="force-polynomial-1.jpg" alt="force polynomial 1">
</div>
</div>
<div class="paragraph">
<p>Vous pouvez alors appuyer sur "CTRL" puis cliquer sur la ligne pour ajouter des points de mesure : une croix rouge sera ajoutÃ©e pour chaque point.
Lorsque vous avez suffisamment de points, cliquez sur le bouton "Calculer le polynÃ´me", qui ajustera un polynÃ´me de 3Ã¨me ordre aux points et remplira automatiquement le champ "polynÃ´me de force" dans les paramÃ¨tres de traitement :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="force-polynomial-2.jpg" alt="force polynomial 2">
</div>
</div>
<div class="paragraph">
<p>You can then close the popup and start processing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="modele-noms-fichier">ModÃ¨les de noms de fichier</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Par dÃ©faut, JSol&#8217;Ex enregistre les images produites dans un sous-dossier correspondant au nom de la vidÃ©o, et dans ce sous-dossier un autre sous-dossier par type d&#8217;image (raw, debug, traitÃ©es, etc&#8230;&#8203;).
Si ce modÃ¨le ne vous convient pas, vous pouvez crÃ©er vos propres modÃ¨les de nommage, en cliquant sur les "&#8230;&#8203;":</p>
</div>
<div class="imageblock">
<div class="content">
<img src="params-5-fr.jpg" alt="params 5 fr">
</div>
</div>
<div class="paragraph">
<p>Un modÃ¨le de nommage consiste en un label (un nom), mais surtout un modÃ¨le dont les composantes sont des jetons entre <code>%</code>.</p>
</div>
<div class="paragraph">
<p>Voisi les jetons disponibles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>%BASENAME%</code> est le nom de base du fichier SER, sans l&#8217;extension</p>
</li>
<li>
<p><code>%KIND%</code> correspond au type d&#8217;image gÃ©nÃ©rÃ©e (raw, debug, &#8230;&#8203;)</p>
</li>
<li>
<p><code>%LABEL%</code> est l&#8217;identifiant des images, par exemple <code>recon</code>, <code>protus</code>, etc&#8230;&#8203;</p>
</li>
<li>
<p><code>%CURRENT_DATETIME%</code> est la date et l&#8217;heure de traitement</p>
</li>
<li>
<p><code>%CURRENT_DATE%</code> est la date de traitement</p>
</li>
<li>
<p><code>%VIDEO_DATETIME%</code> est la date et heure de la vidÃ©o</p>
</li>
<li>
<p><code>%VIDEO_DATE%</code> est la date de la vidÃ©o</p>
</li>
<li>
<p><code>%SEQUENCE_NUMBER%</code> est le numÃ©ro de sÃ©quence dans le cas d&#8217;un traitement en mode batch (avec 4 chiffres, par ex. <code>0012</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Par exemple, pour crÃ©er un modÃ¨le pour mettre toutes vos images dans un mÃªme dossier peut Ãªtre :</p>
</div>
<div class="paragraph">
<p><code>%BASENAME%/%SEQUENCE_NUMBER%_%LABEL%</code></p>
</div>
<div class="paragraph">
<p>Le champ "exemple" donne une idÃ©e de ce qui sera gÃ©nÃ©rÃ©.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lancer_un_traitement">Lancer un traitement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vous avez le choix entre 3 modes de traitement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Le mode "rapide" ne produira que 2 images : l&#8217;image brute reconstituÃ©e, qui permet de se donner une idÃ©e de la circularitÃ© du disque et donc du potentiel sous-Ã©chantillonage, et une image corrigÃ©e gÃ©omÃ©triquement. C&#8217;est un mode particuliÃ¨rement utile lors des premiÃ¨res acquisitions, par exemple de temps de rÃ©gler le tilt correctement. CombinÃ© au fait de ne pas sauvegarder automatiquement les images, il peut vous faire gagner un temps prÃ©cieux et de l&#8217;espace disque !</p>
</li>
<li>
<p>Le mode "complet" produira l&#8217;intÃ©gralitÃ© des images que peut produire JSol&#8217;Ex. En fonction de la raie spectrale choisie, certaines images seront disponibles ou non. Par dÃ©faut, le logiciel produira:</p>
</li>
<li>
<p>l&#8217;image brute reconstituÃ©e</p>
</li>
<li>
<p>une version gÃ©omÃ©triquement corrigÃ©e et "Ã©talÃ©e" (contraste amÃ©liorÃ©)</p>
</li>
<li>
<p>une version colorisÃ©e (si la raie choisie dispose d&#8217;un profil de colorisation)</p>
</li>
<li>
<p>une version en nÃ©gatif</p>
</li>
<li>
<p>une Ã©clipse virtuelle, permettant de simuler un coronagraphe</p>
</li>
<li>
<p>une version "mix" combinant l&#8217;Ã©clipse virtuelle et l&#8217;image colorisÃ©e</p>
</li>
<li>
<p>une image Doppler</p>
</li>
<li>
<p>le mode "personnalisÃ©" permet de choisir plus prÃ©cisÃ©ment les images gÃ©nÃ©rÃ©es, voire de gÃ©nÃ©rer des images non prÃ©vues Ã  l&#8217;origine par le logiciel (voir la <a href="#custom_images">section suivante</a>).</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_affichage_des_images_produites">Affichage des images produites</h3>
<div class="paragraph">
<p>Lorsque les images sont produites, elles apparaissent au fur et Ã  mesure en onglets.
Il vous est alors possible, en fonction des images, de modifier des paramÃ¨tres de contraste et d&#8217;enregistrer les images.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="image-display-fr.jpg" alt="image display fr">
</div>
</div>
<div class="paragraph">
<p>Vous pouvez zoomer dans les images en utilisant la molette de la souris.
Un clic droit vous permettra d&#8217;ouvrir l&#8217;image gÃ©nÃ©rÃ©e dans votre explorateur de fichiers ou dans une nouvelle fenÃªtre.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mode_surveillance_de_rÃ©pertoire">Mode surveillance de rÃ©pertoire</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lors de la mise au point, il peut Ãªtre utile de traiter "Ã  la chaÃ®ne" de nouvelles vidÃ©os jusqu&#8217;Ã  avoir obtenu un rÃ©sultat satisfaisant (image centrÃ©e, mise au point correcte, etc.).
JSol&#8217;Ex offre une faÃ§on simple de gagner du temps, en surveillant un dossier : les vidÃ©os qui apparaissent dans le dossier seront automatiquement traitÃ©es.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, dans le menu fichier, sÃ©lectionnez "Surveiller un dossier" puis sÃ©lectionnez le dossier dans lequel seront enregistrÃ©s vos fichiers SER (par exemple lÃ  oÃ¹ SharpCap va enregistrer).</p>
</div>
<div class="paragraph">
<p>JSol&#8217;Ex bascule en mode "surveillance" que vous pouvez interrompre en cliquant sur le bouton en bas Ã  gauche.</p>
</div>
<div class="paragraph">
<p>Ouvrez maintenant votre logiciel de capture et enregistrez une nouvelle vidÃ©o.
Lorsque vous rebasculerez sur JSol&#8217;Ex, le logiciel ouvrira automatiquement la fenÃ¨tre de paramÃ©trage.
Choisissez vos options et lancez le traitement.</p>
</div>
<div class="paragraph">
<p>Une fois le rÃ©sultat obtenu, rebasculez sur le logiciel d&#8217;acquisition et enregistrez une nouvelle vidÃ©o.
Lorsque vous rebasculerez sur JSol&#8217;Ex, cette fois-ci le logiciel rÃ©utilisera les paramÃ¨tres utilisÃ©s lors du traitement de la premiÃ¨re vidÃ©o : vous obtiendrez donc rapidement une nouvelle image !</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Lorsque vous basculez de votre logiciel de capture Ã  JSol&#8217;Ex, faites attention Ã  ce que l&#8217;enregistrement soit terminÃ©. Dans le cas contraire, le traitement serait lancÃ© sur un fichier SER incomplet, ce qui Ã©chouera.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Lorsque vous avez terminÃ©, cliquez sur le bouton "Interrompre la surveillance" en bas Ã  gauche.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Vous pouvez combiner le fait d&#8217;Ãªtre en mode surveillance avec le fait d&#8217;ouvrir une image dans une fenÃªtre externe (en faisant un clic droit sur l&#8217;image choisie). En effet, lors du traitement de la nouvelle vidÃ©o, l&#8217;image dans la fenÃªtre sera automatiquement remplacÃ©e par la nouvelle version. Ceci peut par exemple Ãªtre intÃ©ressant dans des prÃ©sentations publiques, en ayant une fenÃªtre montrant simplement le rÃ©sultat du traitement.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom_images">Personnalisation des images gÃ©nÃ©rÃ©es</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lorsque vous cliquez sur "PersonnalisÃ©" au lieu des modes "rapide" ou "complet", JSol&#8217;Ex vous permet de choisir bien plus prÃ©cisÃ©ment quelles images gÃ©nÃ©res.</p>
</div>
<div class="paragraph">
<p>Il existe 2 modes : le mode <em>simple</em> et le mode <em>ImageMath</em>.</p>
</div>
<div class="paragraph">
<p>Dans le mode simple, vous pouvez choisir la liste des images gÃ©nÃ©rÃ©es en cochant chacune d&#8217;entre elles, et vous pouvez aussi demander la gÃ©nÃ©ration d&#8217;images avec des dÃ©calages de pixels diffÃ©rents.</p>
</div>
<div class="paragraph">
<p>Par exemple, si vous souhaitez disposer d&#8217;images allant du continuum en passant par la raie explorÃ©e, vous pouvez entrer <code>-10;-9;-8;-7;-6;-5;-4;-3;-2;-1;0;1;2;3;4;5;6;7;8;9;10</code> ce qui aura pour effet de gÃ©nÃ©rer 21 images distinctes, pour des dÃ©calages de pixels entre -10 et 10.</p>
</div>
<div class="paragraph">
<p>Ceci peut Ãªtre intÃ©ressant par exemple si vous les recombinez pour en faire un GIF animÃ© ou une vidÃ©o.</p>
</div>
<div class="paragraph">
<p>A noter que si vous cochez certaines images comme "Doppler", certains dÃ©calages sont automatiquement ajoutÃ©s Ã  la liste (ex. -3 et 3).</p>
</div>
<div class="paragraph">
<p>Si ceci ne suffit pas, vous pouvez utiliser le mode avancÃ© "ImageMath" qui est extrÃªmement puissant tout en restant simple d&#8217;accÃ¨s.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="imagemath">ImageMath : scripts de calcul d&#8217;images</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_Ã _imagemath">Introduction Ã  ImageMath</h3>
<div class="paragraph">
<p>Le mode ImageMath permet de gÃ©nÃ©rer des images en effectuant des calculs plus ou moins complexes sur des images gÃ©nÃ©rÃ©es.
Il repose sur un langage de script <em>simple</em> mais suffisamment riche pour faire des traitement complexes.</p>
</div>
<div class="paragraph">
<p>Reprenons l&#8217;exemple prÃ©cÃ©dent, dans lequel il s&#8217;agissait de gÃ©nÃ©rer l&#8217;ensemble des images pour des dÃ©calages allant de -10 Ã  10 pixels.
Dans le mode "simple", il nous a fallu entrer l&#8217;ensemble des valeurs Ã  la main, sÃ©parÃ©s par des points-virgule.
Dans le mode "ImageMath", nous disposons d&#8217;un langage permettant de le faire.</p>
</div>
<div class="paragraph">
<p>CommenÃ§ez par sÃ©lectionner le mode <code>ImageMath</code> dans la liste et cliquez sur "Ouvrir ImageMath".
L&#8217;interface suivante s&#8217;ouvre:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="imagemath-1-fr.jpg" alt="imagemath 1 fr">
</div>
</div>
<div class="paragraph">
<p>Dans la partie gauche, "Scripts Ã  exÃ©cuter", nous trouvons la liste des scripts qui seront appliquÃ©s lors du traitement.
Les scripts sont des fichiers enregistrÃ©s sur votre disque, que vous pouvez partager avec d&#8217;autres utilisateurs.
Leur contenu est Ã©ditable dans la partie droite de l&#8217;interface.</p>
</div>
<div class="paragraph">
<p>Effacez le contenu du script d&#8217;exemple et remplacez le par:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">range(-10;10)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Puis cliquez sur "sauvegarder".
Choisissez un fichier de destination et enregistrez.
Le script apparaÃ®t dÃ©sormais dans la liste de gauche, il sera appliquÃ© lors du traitement.</p>
</div>
<div class="paragraph">
<p>Cliquez alors sur "Ok" pour fermer "ImageMath" et ne conservez que "AprÃ¨s correction gÃ©omÃ©trique et Ã©tendue" dans la liste des images.</p>
</div>
<div class="paragraph">
<p>Cliquez sur "Ok" pour lancer le traitement, vous obtenez alors les images demandÃ©es:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="imagemath-2-fr.jpg" alt="imagemath 2 fr">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_les_fonctions_dimagemath">Les fonctions d&#8217;ImageMath</h3>
<div class="paragraph">
<p>Nous avons utilisÃ© ici une seule fonction, <code>range</code>, qui a permis de gÃ©nÃ©rer en une seule instruction une vingtaine d&#8217;images, mais il existe de nombreuses fonctions.</p>
</div>
<div class="paragraph">
<p>Veuillez vous rÃ©fÃ©rer Ã  <a href="imagemath.html">cette page</a> pour une liste complÃ¨te des fonctions disponibles.</p>
</div>
</div>
<div class="sect2">
<h3 id="custom-functions">Fonctions personnalisÃ©es</h3>
<div class="paragraph">
<p>En plus des fonctions fournies par JSol&#8217;Ex, il est possible de dÃ©finir vos propres fonctions, qui combinent des fonctions existantes.
Par exemple, disons que vous souhaitiez dessiner le globe, les dÃ©tails techniques et les paramÃ¨tres solaires sur plus d&#8217;une image.
Votre script pourrait ressembler Ã  ceci :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">image1=draw_obs_details(draw_solar_params(draw_globe(img(0))))
image2=draw_obs_details(draw_solar_params(draw_globe(auto_contrast(img(0);1.5))))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Au lieu de rÃ©pÃ©ter les mÃªmes appels de fonction sur plusieurs images, nous pouvons dÃ©clarer une fonction :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[fun:decorate img]                                              <i class="conum" data-value="1"></i><b>(1)</b>
   result=draw_obs_details(draw_solar_params(draw_globe(img)))  <i class="conum" data-value="2"></i><b>(2)</b>

[outputs]
image1=decorate(img(0))                                         <i class="conum" data-value="3"></i><b>(3)</b>
image2=decorate(auto_contrast(img(0);1.5))                      <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La dÃ©claration de la fonction. Le nom de la fonction est <code>decorate</code>, et elle prend un seul argument, <code>img</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La fonction doit se terminer par une affectation Ã  la variable <code>result</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>La fonction est ensuite appelÃ©e avec l&#8217;image <code>img(0)</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>La fonction peut Ã©galement Ãªtre appelÃ©e avec l&#8217;image <code>auto_contrast(img(0);1.5)</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les fonctions <strong>doivent</strong> Ãªtre dÃ©clarÃ©es au dÃ©but du script.
Elles peuvent prendre n&#8217;importe quel nombre d&#8217;arguments, mais elles doivent toujours retourner une valeur dans la variable <code>result</code>.
Si vous dÃ©clarez une fonction, vous <strong>devez</strong> avoir une section qui sÃ©pare les dÃ©clarations de fonctions de votre script principal (pour la section <code>[outputs]</code>).</p>
</div>
<div class="paragraph">
<p>Une fonction peut avoir des expressions intermÃ©diaires et peut appeler d&#8217;autres fonctions.
Par exemple, crÃ©ons une fonction qui affichera notre image avec un titre :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[fun:titled img title]                                          <i class="conum" data-value="1"></i><b>(1)</b>
   decorated=decorate(img)                                      <i class="conum" data-value="2"></i><b>(2)</b>
   result=draw_text(decorated, 10, 10, title)

[fun:decorate img]
   result=draw_obs_details(draw_solar_params(draw_globe(img)))

[outputs]
image1=titled(img(0))                                         <i class="conum" data-value="3"></i><b>(3)</b>
image2=titled(auto_contrast(img(0);1.5))                      <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La dÃ©claration de la fonction <code>titled</code>. Elle prend 2 arguments : <code>img</code> et <code>title</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La fonction <code>titled</code> appelle la fonction <code>decorate</code>, puis ajoute un titre Ã  l&#8217;image.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>La fonction <code>titled</code> est ensuite appelÃ©e avec l&#8217;image <code>img(0)</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>La fonction <code>titled</code> peut Ã©galement Ãªtre appelÃ©e avec l&#8217;image <code>auto_contrast(img(0);1.5)</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Passer une liste Ã  une fonction</div>
<div class="paragraph">
<p>Le premier argument d&#8217;une fonction est toujours traitÃ© diffÃ©remment.
Si une liste est utilisÃ©e, alors la fonction sera appelÃ©e pour chaque Ã©lÃ©ment de la liste, puis les rÃ©sultats seront collectÃ©s dans une liste.
Par exemple, si nous appelons la fonction <code>decorate</code> ci-dessus avec une liste d&#8217;images, alors le rÃ©sultat sera une liste d&#8217;images dÃ©corÃ©es.
Si la fonction prend plus d&#8217;un argument, seul le premier argument se comporte de cette maniÃ¨re.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="includes">Inclure d&#8217;autres scripts</h3>
<div class="paragraph">
<p>Il est possible d&#8217;inclure d&#8217;autres scripts dans votre script.
Cela peut Ãªtre utile si vous avez un ensemble de fonctions que vous souhaitez rÃ©utiliser dans plusieurs scripts.
Par exemple, nous pourrions extraire les dÃ©finitions de fonctions de l&#8217;exemple prÃ©cÃ©dent et les mettre dans un fichier sÃ©parÃ©, <code>functions.math</code> :</p>
</div>
<div class="listingblock">
<div class="title">functions.math</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[fun:decorate img]
   result=draw_obs_details(draw_solar_params(draw_globe(img)))
[fun:titled img title]
   decorated=decorate(img)
   result=draw_text(decorated, 10, 10, title)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite, il peut Ãªtre inclus dans un autre script :</p>
</div>
<div class="listingblock">
<div class="title">myscript.math</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[include "functions"]

[outputs]
image1=titled(img(0), "Ma premiÃ¨re image")
image2=titled(auto_contrast(img(0);1.5), "Ma deuxiÃ¨me image")</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Les inclusions sont rÃ©solues par rapport au script qui les inclut.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="remote-scriptgen">GÃ©nÃ©ration de script Ã  distance</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Cette fonctionnalitÃ© est expÃ©rimentale et peut Ã©voluer Ã  l&#8217;avenir.
Elle est conÃ§ue pour les utilisateurs avancÃ©s qui sont Ã  l&#8217;aise avec la programmation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>ImageMath est un langage d&#8217;expression.
Il ne prend pas en charge les structures de contrÃ´le comme les boucles ou les conditions, ce qui peut parfois Ãªtre limitant.
De plus, il se peut que vous souhaitiez effectuer des opÃ©rations qui ne sont pas disponibles dans le langage lui-mÃªme.</p>
</div>
<div class="paragraph">
<p>Pour prendre en charge ces cas d&#8217;utilisation avancÃ©s, une fonction spÃ©ciale nommÃ©e <code>remote_scriptgen</code> est disponible.
Cette fonction appellera un service qui sera responsable de gÃ©nÃ©rer un script qui contribuera Ã  de nouvelles variables dans le contexte actuel.</p>
</div>
<div class="paragraph">
<p>La fonction accepte un seul argument, qui est une URL vers le service.
JSol&#8217;Ex crÃ©era alors une requÃªte <code>POST</code> Ã  cette URL, avec une charge utile JSON contenant le contexte actuel, c&#8217;est-Ã -dire la liste des variables avec leurs valeurs au moment de l&#8217;appel, mais aussi le contexte comme les paramÃ¨tres de traitement ou la longueur d&#8217;onde dÃ©tectÃ©e.</p>
</div>
<div class="paragraph">
<p>Le payload JSON a 2 entrÃ©es principales : <code>variables</code> et <code>params</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "variables": {
     ... une clÃ© par variable ...
  },
  "context": {
    ... les paramÃ¨tres du processus ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les variables peuvent Ãªtre des valeurs simples, comme des nombres ou des chaÃ®nes de caractÃ¨res, mais aussi des tableaux ou des objets comme des images :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "variables": {
    "detectedWavelen": 6562.8099999999995,
    "detectedDispersion": 0.10878780004221283,
    "l0": "4.4165",
    "src": {
      "type": "image",
      "width": 1424,
      "height": 1424,
      "file": "/tmp/jsolex/1960308/image9339121918435728514.fits",
      "metadata": {
        "sourceInfo": {
          "serFileName": "12_08_34.ser",
          "parentDirName": "christian",
          "dateTime": "2021-09-05T10:08:34.806652200Z[UTC]"
        },
        "pixelShiftRange": {
          "minPixelShift": -20.0,
          "maxPixelShift": 40.0,
          "step": 6.0
        },
        "solarParameters": {
          "carringtonRotation": 2248,
          "b0": 0.12636308214692193,
          "l0": 4.416504789595021,
          "p": 0.38650968395297775,
          "apparentSize": 0.0091870061684479
        },
        "pixelShift": {
          "pixelShift": 0.0
        },
        "transformationHistory": {
          "transforms": [
            "Rotation Ã  gauche",
            "Retournement",
            "RÃ©duction de bandes (taille de bande : 24 passes : 16)",
            "Correction de gÃ©omÃ©trie",
            "Recadrage automatique",
            "ImageMath: img(0)",
            "ImageMath: img(0)",
            "ImageMath: img(0)",
            "ImageMath: src=img(0)",
            "ImageMath: range(-1;1;.5)",
            "ImageMath: range(-1;1;.5)",
            "ImageMath: range(-1;1;.5)",
            "ImageMath: range(-1;1;.5)",
            "ImageMath: img(0)",
            "ImageMath: img(0)",
            "ImageMath: img(0)",
            "ImageMath: src=img(0)"
          ]
        },
        "ellipse": {
          "a": 0.7071067811865355,
          "b": -1.1224941413357953E-13,
          "c": 0.7071067811865596,
          "d": -1006.9200564095466,
          "e": -1006.9200564095809,
          "f": 423490.4527558379
        },
        "generatedImageMetadata": {
          "kind": "IMAGE_MATH",
          "title": "src",
          "name": "batch/2025-03-26T225606/src/0000_12_08_34_src"
        }
      }
    },
    "blackPoint": "283.533",
    "angleP": "0.3865",
    "some_var": 123.0,
    "b0": "0.1264",
    "carrot": "2248"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans le cas d&#8217;une image, l&#8217;objet aura une clÃ© <code>type</code> avec la valeur <code>image</code>.
Le fichier sera disponible uniquement au format FITS.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Le chemin du fichier est le chemin vers le fichier FITS, qui est un fichier temporaire, <strong>sur l&#8217;hÃ´te qui exÃ©cute JSol&#8217;Ex</strong>.
Par consÃ©quent, vous ne pourrez accÃ©der Ã  ce fichier que depuis le mÃªme hÃ´te !
Cela peut Ã©galement Ãªtre utilisÃ© pour gÃ©nÃ©rer de nouvelles images, qui peuvent Ãªtre chargÃ©es dans JSol&#8217;Ex si le script retournÃ© contient une opÃ©ration <code>LOAD</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Le service doit retourner un objet JSON contenant une clÃ© <code>script</code>, avec le script Ã  exÃ©cuter dans JSol&#8217;Ex.
Il <em>peut</em> aussi renvoyer un objet avec une clÃ© <code>error</code>, qui sera affichÃ©e Ã  l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Les scripts retournÃ©s par le serveur sont interprÃ©tÃ©s dans un contexte sÃ©parÃ©, mais ils partagent les variables et fonctions utilisateur du script appelant.
Seule la section <strong>outputs</strong> contribuera Ã  de nouvelles variables dans le contexte.</p>
</div>
<div class="paragraph">
<p>Par exemple, si un serveur retourne le script suivant :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[tmp]
base=auto_contrast(img(0);1.5)

[outputs]
final=draw_obs_details(draw_solar_params(draw_globe(base)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alors seule la variable <code>final</code> sera visible dans le script appelant aprÃ¨s exÃ©cution.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Lorsqu&#8217;un script appelle la fonction <code>remote_scriptgen</code>, JSol&#8217;Ex contactera le serveur plusieurs fois avec des charges utiles diffÃ©rentes.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_scripts_imagemath">Scripts ImageMath</h3>
<div class="paragraph">
<p>Dans la section prÃ©cÃ©dente, nous avons vu les "briques Ã©lÃ©mentaires" d&#8217;ImageMath, qui permettent de calculer des images.
Les scripts permettent d&#8217;efficacement combiner ces briques pour en faire de vÃ©ritables outils puissants pour traiter vos images.</p>
</div>
<div class="paragraph">
<p>A titre d&#8217;exemple, voici un script qui permet de traiter une image dans la raie HÃ©lium.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[params]
# The shifting between the helium line and the detected line (in pixels)
Line=5875.62
HeliumShift=find_shift(Line)
# Banding correction width and number of iterations
BandWidth=25
BandIterations=20
# Contrast adjustment
Gamma=1.5
# Autocrop factor (of diameter)
AutoCropFactor=1.1

## Temporary variables
[tmp]
helium_raw = img(HeliumShift) - continuum()
helium_fixed = fix_banding(helium_raw;BandWidth;BandIterations)
cropped = autocrop2(auto_contrast(helium_fixed;Gamma);AutoCropFactor)

## Let's produce the images now!
[outputs]
helium_mono = cropped
helium_color = colorize(helium_mono, Line)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre script est dÃ©composÃ© en 3 sections: <code>[params]</code>, <code>[tmp]</code> et <code>[outputs]</code>.
La seule section obligatoire est <code>[outputs]</code>: elle permet de dÃ©finir quelles images nous souhaitons obtenir en sortie.
Le nom des autres sections est arbitraire, vous pouvez en dÃ©finir autant que vous le souhaitez.</p>
</div>
<div class="paragraph">
<p>Ici, nous avons une section <code>[params]</code> qui permet de mettre en Ã©vidence les <em>paramÃ¨tres de notre script</em>, autrement dit ce que l&#8217;utilisateur peut configurer.
On y trouve des variables, dÃ©clarÃ©es par un nom (ex <code>Line</code>) et une valeur <code>5875.62</code>.
La deuxiÃ¨me variable, <code>HeliumShift</code>, est calculÃ©e Ã  partir de la fonction <code>find_shift</code>, qui prend en paramÃ¨tre la variable <code>Line</code> (et permet de dÃ©terminer le dÃ©calage en pixels de la ligne par rapport Ã  celle dÃ©tectÃ©e).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Une variable doit ne peut contenir que des caractÃ¨res ascii, des numÃ©ros (hors premier caractÃ¨re) ou le caractÃ¨re _. Par exemple, <code>maVariable</code>, <code>MaVariable0</code> et <code>maVariable_0</code> sont tous valides, mais <code>hÃ©lium</code> ne l&#8217;est pas.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ces variables peuvent Ãªtre rÃ©utilisÃ©s dans d&#8217;autres variables ou des appels de fonctions.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Les variables sont sensibles Ã  la casse. <code>maVariable</code> et <code>MaVariable</code> sont 2 variables distinctes !
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ainsi, notre 2Ã¨me section, <code>[tmp]</code>, dÃ©finit des images qui nous servent d&#8217;intermÃ©diaire de calculs, mais pour lesquelles nous ne sommes pas intÃ©ressÃ©s par le rÃ©sultat.
Ici, nous calculons 3 images temporaires :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>helium_raw</code> est l&#8217;image de la raie HÃ©lium, dÃ©calÃ©e par rapport Ã  la raie dÃ©tectÃ©e et Ã  laquelle on a soustrait l&#8217;image continuum.</p>
</li>
<li>
<p><code>helium_fixed</code> est l&#8217;image <code>helium_raw</code> Ã  laquelle on a appliquÃ© l&#8217;algorithme de correction de transversalliums.</p>
</li>
<li>
<p><code>cropped</code> est l&#8217;image <code>helium_fixed</code> Ã  laquelle on a appliquÃ© un rognage automatique et un ajustement de contraste.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Au final, la section <code>[outputs]</code> dÃ©clare les images qui nous intÃ©ressent :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>helium_mono</code> est l&#8217;image <code>cropped</code> telle quelle, en noir et blanc.</p>
</li>
<li>
<p><code>helium_color = colorize(fix_banding(helium_raw;BandWidth;BandIterations), "Helium (D3)")</code> permet d&#8217;obtenir une version colorisÃ©e.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Vous pouvez mettre des commentaires sur une ligne commenÃ§ant par <code>#</code> ou <code>//</code>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trimming-ser-files">RÃ©duire la taille des fichiers SER</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Il n&#8217;est pas rare d&#8217;avoir des fichiers SER qui contiennent beaucoup de trames vides au dÃ©but ou Ã  la fin, en raison de la faÃ§on dont nous capturons gÃ©nÃ©ralement les vidÃ©os : nous commenÃ§ons la capture, puis nous attendons que le montage se stabilise, enfin nous arrÃªtons la capture.
De plus, notre fenÃªtre de rognage peut Ãªtre un peu trop grande pour ce que nous voulons rÃ©ellement Ã©tudier.</p>
</div>
<div class="paragraph">
<p>En consÃ©quence, les fichiers SER stockÃ©s sur le disque sont gÃ©nÃ©ralement beaucoup plus grands que ce qu&#8217;ils devraient Ãªtre.
Depuis JSol&#8217;Ex 2.10, une nouvelle option est disponible Ã  la fin du traitement d&#8217;un fichier.
Vous pouvez cliquer sur le bouton "RÃ©duire SER" en haut Ã  droite de l&#8217;interface, ce qui ouvrira une nouvelle fenÃªtre :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="trimming-fr.jpg" alt="trimming fr">
</div>
</div>
<div class="paragraph">
<p>Cette fenÃªtre est prÃ©-remplie avec des paramÃ¨tres dÃ©duits du fichier traitÃ©.
En particulier, les trames de dÃ©but et de fin, ainsi que les valeurs X mininum et maximum (largeur) sont dÃ©terminÃ©es automatiquement Ã  partir de la dÃ©tection du disque solaire dans la vidÃ©o.
Une marge raisonnables de 10% est ajoutÃ©e, ce qui signifie que parfois, la premiÃ¨re et la derniÃ¨re trame peuvent en fait correspondre Ã  la vidÃ©o complÃ¨te si vous avez rÃ©ellement une vidÃ©o oÃ¹ le soleil apparaÃ®t rapidement dans le champ de vision.</p>
</div>
<div class="paragraph">
<p>Les paramÃ¨tres "pixels vers le haut"/"pixels vers le bas" correspondent au nombre de pixels que vous souhaitez conserver dans le fichier SER cible autour de la ligne spectrale.
Une fois de plus ces valeurs sont dÃ©duites de ce qu&#8217;il est possible de faire en corrigeant le "sourire" (courbature de la ligne spectrale), mais il peut Ãªtre particuliÃ¨rement intÃ©ressant de les rÃ©duire, car cela aura un impact important sur la taille du fichier.
Cependant, rÃ©duire le nombre de pixels vers le haut/bas supprimera des informations de la vidÃ©o (vous ne pourrez pas calculer d&#8217;images avec des dÃ©calages de pixels plus importants), alors soyez toujours prudent de ne pas trop les rÃ©duire.</p>
</div>
<div class="paragraph">
<p>Une fois que vous Ãªtes satisfait des paramÃ¨tres, cliquez sur "RÃ©duire" et un nouveau fichier SER sera crÃ©Ã© dans le mÃªme dossier que l&#8217;original, avec le suffixe <code>_trimmed</code>.</p>
</div>
<div class="paragraph">
<p>Il est important de savoir que la vidÃ©o rognÃ©e aura Ã©galement la correction du sourire appliquÃ©e, ce qui signifie que la ligne spectrale sera centrÃ©e dans la vidÃ©o et que chaque ligne sera parfaitement horizontale.
Cette information est utilisÃ©e par JSol&#8217;Ex si vous dÃ©cidez de traiter la vidÃ©o rognÃ©e, de sorte que vous n&#8217;ayez pas Ã  recalculer la correction du sourire.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Il est important de comprendre que la rÃ©duction de fichier SER est une opÃ©ration destructive : si vous rÃ©duisez le nombre de trames ou les valeurs min x/max x, alors vous tronquez potentiellement le disque solaire ou des caractÃ©ristiques comme les protubÃ©rances.
Si vous choisissez des valeurs trop faibles pour les pixels vers le haut/bas, alors vous rÃ©duisez la bande passante de l&#8217;observation, ce qui signifie par exemple que vous ne pourrez plus gÃ©nÃ©rer d&#8217;image de continuum.
Dans les deux cas, le rÃ©sultat du traitement de la vidÃ©o rognÃ©e sera diffÃ©rent de l&#8217;original.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Voici un exemple de rÃ©sultat :</p>
</div>
<video width="100%" controls autoplay loop>
  <source src="orig.webm" type="video/webm">
  Your browser does not support the video tag.
</video>
<div class="paragraph">
<p>Et la version rÃ©duite :</p>
</div>
<video width="100%" controls autoplay loop>
  <source src="trimmed.webm" type="video/webm">
  Your browser does not support the video tag.
</video>
</div>
</div>
<div class="sect1">
<h2 id="batch-mode">Traitement par lots</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En plus du traitement individuel, JSol&#8217;Ex propose une mÃ©canique de traitement par lot.
Dans ce mode, plusieurs vidÃ©os sont traitÃ©es en parallÃ¨le, permettant de gÃ©nÃ©rer rapidement un grand nombre d&#8217;images, qui peuvent par exemple Ãªtre ensuite envoyÃ©es dans un logiciel d&#8217;empilement tel qu&#8217;AutoStakkert!.</p>
</div>
<div class="paragraph">
<p>Pour lancer un traitement en lot, il faut aller dans le menu "Fichier" et cliquer sur "Traiter un lot".
SÃ©lectionnez alors l&#8217;ensemble des fichiers SER Ã  traiter (ils doivent se trouver dans un seul et mÃªme dossier).</p>
</div>
<div class="paragraph">
<p>La mÃªme fenÃ¨tre de paramÃ©trage que dans le mode fichier seul s&#8217;ouvre alors.
Elle permet de configurer le traitement, mais cette fois si pour le lot complet.
Lorsque le traitement est lancÃ©, il y a cependant quelques diffÃ©rences:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>les fichiers seront systÃ©matiquement enregistrÃ©s, indÃ©pendemment de la case "enregistrement automatique des images"</p>
</li>
<li>
<p>les images ne s&#8217;affichent pas dans l&#8217;interface, mais une liste des fichiers traitÃ©s Ã  la place</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="batch-mode-fr.jpg" alt="batch mode fr">
</div>
</div>
<div class="paragraph">
<p>La liste des fichiers comprend le <em>fichier de log</em> du traitement de ce fichier, ainsi que toutes les images gÃ©nÃ©rÃ©es pour ce fichier.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
En mode batch, nous recommendons d&#8217;utiliser un <a href="#modele-noms-fichier">modÃ¨le de nom de fichier</a> qui met toutes les images dans le mÃªme dossier, ce qui rendra plus simple leur exploitation dans un programme tiers.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_passage_en_revue_des_images_traitÃ©es_en_lot">Passage en revue des images traitÃ©es en lot</h3>
<div class="paragraph">
<p>Une fois qu&#8217;un lot a Ã©tÃ© traitÃ©, il est possible de passer en revue les images gÃ©nÃ©rÃ©es.
Ceci permettra, par exemple, de ne conserver que les images avec un disque sans passage nuageux, ou les images sans dÃ©formations.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, dans les options de traitement, dans l&#8217;onglet "divers", cochez la case "Passer en revue les images aprÃ¨s traitement en lot" :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="image-filtering-3-fr.jpg" alt="image filtering 3 fr">
</div>
</div>
<div class="paragraph">
<p>Lorsque le traitement est terminÃ©, une nouvelle fenÃªtre s&#8217;ouvre, vous permettant de passer en revue les images traitÃ©es :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="image-filtering-1-fr.jpg" alt="image filtering 1 fr">
</div>
</div>
<div class="paragraph">
<p>En haut Ã  droite, vous pouvez choisir entre rejeter une image, la conserver, ou la dÃ©finir comme la meilleure image.
La meilleure image est alors affichÃ©e Ã  gauche, et l&#8217;image courante Ã  droite.
Vous pouvez ainsi comparer chaque image Ã  la meilleure image, et dÃ©cider si vous la conservez ou non.</p>
</div>
<div class="paragraph">
<p>Dans la liste de gauche, vous disposez de la liste des images gÃ©nÃ©rÃ©es pour chaque fichier SER.
En bas Ã  droite, vous pouvez passer Ã  l&#8217;image suivante ou prÃ©cÃ©dente, et terminer le processus.</p>
</div>
<div class="paragraph">
<p>Lorsque vous avez fini, la fenÃªtre suivante s&#8217;ouvre :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="image-filtering-2-fr.jpg" alt="image filtering 2 fr">
</div>
</div>
<div class="paragraph">
<p>Elle vous permet de choisir ce que vous voulez faire des images qui ont Ã©tÃ© rejetÃ©es : les conserver, les supprimer, ou les dÃ©placer dans un sous-dossier (par dÃ©faut, elles seront dÃ©placÃ©es).
De mÃªme, vous pouvez choisir ce que vous voulez faire des fichiers SER qui ont servi Ã  gÃ©nÃ©rer ces images rejetÃ©es : les conserver, les supprimer, ou les dÃ©placer dans un sous-dossier.</p>
</div>
<div class="paragraph">
<p>Si vous utilisez un script en mode batch, la partie <code><a id="batch"></a></code> du script ne s&#8217;exÃ©cutera que pour les images que vous avez conservÃ©es, ce qui permettra donc, par exemple, de faire un stacking uniquement sur les images de qualitÃ©.</p>
</div>
<div class="paragraph">
<p>A noter que dans les fonctions <code>stack</code> et <code>stack_ref</code>, vous disposerez alors de la possiblititÃ© de spÃ©cifier la mÃ©thode de sÃ©lection de la rÃ©fÃ©rence <code>manual</code>, qui choisira alors la meilleure image que vous avez sÃ©lectionnÃ©e.</p>
</div>
</div>
<div class="sect2">
<h3 id="script-batch">Extensions d&#8217;ImageMath disponibles en mode batch</h3>
<div class="paragraph">
<p>Lorsque vous utilisez le mode batch, une nouvelle section est disponible dans les <a href="#imagemath">scripts ImageMath</a>.
Cette section permet de composer des images Ã  partir du rÃ©sultat du traitement de chaque image individuelle.
Typiquement, ceci peut-Ãªtre utilisÃ© pour faire de l&#8217;empilement.</p>
</div>
<div class="paragraph">
<p>Cette section doit apparaÃ®tre en fin de script et se dÃ©limite par le bloc <code>[[batch]]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">#
# Empile des images en utilisant le mode batch
#

[params]
# banding correction width and iterations
bandingWidth=25
bandingIterations=3
# autocrop factor
cropFactor=1.1
# contrast adjustment
gamma=1.2

[tmp]
corrected = fix_banding(img(0);bandingWidth;bandingIterations) <i class="conum" data-value="1"></i><b>(1)</b>
contrast_fixed = auto_contrast(corrected;gamma)                <i class="conum" data-value="2"></i><b>(2)</b>

[outputs]
cropped = autocrop2(contrast_fixed;cropFactor;32)              <i class="conum" data-value="3"></i><b>(3)</b>

# This is where we stack images, simply using a median
# and assuming all images will have the same output size
[[batch]]                                                      <i class="conum" data-value="4"></i><b>(4)</b>
[outputs]
stacked=sharpen(median(cropped))                               <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Pour chaque film, on calcule une image intermÃ©diaire corrigÃ©e (qui ne sera pas stockÃ©e sur disque)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>On applique une correction de contraste sur cette image corrigÃ©e</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Important pour l&#8217;empilement : on rÃ©duit les images Ã  un carrÃ© centrÃ© sur le disque solaire et on arondit les dimensions Ã  un multiple de 32 pixels. Il s&#8217;agit de notre image de sortie pour chaque film du lot.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>On dÃ©clare une section <code>[[batch]]</code> pour dÃ©crire la sortie du mode batch</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Une image nommÃ©e <code>stacked</code> sera calculÃ©e en utilisant la mÃ©diane des images <code>cropped</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Il est important de bien comprendre que seules les images apparaissant dans la partie <code>[outputs]</code> du traitement individiduel peuvent Ãªtre utilisÃ©es dans la section <code>[[batch]]</code>.
Ainsi, une image <code>cropped</code> apparaissant dans la partie individuelle devient implicitement une <em>liste</em> d&#8217;images dans la section <code>[[batch]]</code>: on travaille bien sur la liste des images gÃ©nÃ©rÃ©es dans le lot !</p>
</div>
<div class="paragraph">
<p>Certaines fonctions comme <code>img</code> ne sont pas disponibles dans le mode <code>batch</code>.
Si vous avez besoin d&#8217;images individuelles, vous devez les stocker dans une variable de sortie.
Par exemple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[outputs]
frame=img(0)       <i class="conum" data-value="1"></i><b>(1)</b>

[[batch]]
[outputs]
video=anim(frame)  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Pour que <code>img(0)</code> soit disponible dans la section <code>batch</code>, on l&#8217;assigne dans une variable nommÃ©e <code>frame</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>On crÃ©e une animation dont chaque image est constituÃ©e d&#8217;une <code>frame</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_scripts_indÃ©pendants">Scripts indÃ©pendants</h3>
<div class="paragraph">
<p>Une derniÃ¨re faÃ§on d&#8217;utiliser des scripts est de rÃ©utiliser des rÃ©sultats de sessions prÃ©cÃ©dentes (typiquement des images traitÃ©es lors d&#8217;une ou plusieurs sessions) sans avoir besoin de traiter une nouvelle vidÃ©o.</p>
</div>
<div class="paragraph">
<p>Pour se faire, vous pouvez passer par le menu "Outils" puis "Editeur ImageMath".
L&#8217;interface qui apparaÃ®t est exactement la mÃªme que lors du traitement d&#8217;une vidÃ©o ou d&#8217;un lot de vidÃ©os.
La principale diffÃ©rence dans ce mode est que les images doivent Ãªtre chargÃ©es avec les fonctions <code>load</code> ou <code>load_many</code> (au lieu d&#8217;utiliser <code>img</code>).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Si vous utilisez ce mode, il est important de charger des images enregistrÃ©es au format FITS. En effet, ces images contiennent des mÃ©tadonnÃ©es telles que les ellipses dÃ©tectÃ©es, les paramÃ¨tres de traitement, etc. qui permettent de faire les mÃªmes traitements avec des images enregistrÃ©es sur disque que ceux obtenus dans une session de traitement classique.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mesures">Mesures</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_mesures_de_dÃ©calage_vers_le_rouge">Mesures de dÃ©calage vers le rouge</h3>
<div class="paragraph">
<p>Si vous traitez une image H-alpha, JSol&#8217;Ex peut automatiquement rechercher dans l&#8217;image des rÃ©gions oÃ¹ le <em>redshift</em> (dÃ©calage vers le rouge ou vers le bleu) est particuliÃ¨rement fort.</p>
</div>
<div class="paragraph">
<p>Pour se faire, vous devez soit sÃ©lectionner le mode "complet" lors du traitement, soit cocher la case "Mesures de dÃ©calage vers le rouge" dans la sÃ©lection personnalisÃ©e des images.</p>
</div>
<div class="paragraph">
<p>Les mesures ne seront valides <strong>que</strong> si la taille des pixels renseignÃ©e est correcte <strong>et</strong> que vous utilisez un Sol&#8217;Ex (d&#8217;autres spectrohÃ©liographes ont des focales diffÃ©rentes).</p>
</div>
<div class="paragraph">
<p>Lors du traitement, une image supplÃ©mentaire sera gÃ©nÃ©rÃ©e avec les rÃ©gions entourÃ©es en rouge et la vitesse associÃ©e.</p>
</div>
<div class="paragraph">
<p>De plus, si vous sÃ©lectionnez les images de dÃ©bug, les parties du spectre ayant permis de trouver ces rÃ©gions seront affichÃ©es.</p>
</div>
<div class="paragraph">
<p>Enfin, une fois la dÃ©tection effectuÃ©e, il vous est possible de gÃ©nÃ©rer 2 nouveaux types de rendus, en vous rendant sur l&#8217;onglet "Redshift":</p>
</div>
<div class="imageblock">
<div class="content">
<img src="redshift-tab.jpg" alt="redshift tab">
</div>
</div>
<div class="paragraph">
<p>La taille correspond Ã  la taille minimale de la rÃ©gion Ã  capturer, en pixels.
Une petite rÃ©gion sera centrÃ©e autour du filament dÃ©tectÃ©, mais pourra Ãªtre assez pixelisÃ©e selon les cas.
La marge permet de choisir combien, en dÃ©calage de pixels, prendre de marge par rapport Ã  ce qu&#8217;a dÃ©tectÃ© JSol&#8217;Ex.
Par exemple, JSol&#8217;Ex peut trouver un dÃ©calage maximum de 20 pixels, mais vous pouvez souhaiter ajouter 2 ou 4 pixels de marge pour une animation et bien voir apparaÃ®tre le filament.</p>
</div>
<div class="paragraph">
<p>Enfin, sÃ©lectionnez le type de rendu :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Animation : gÃ©nÃ¨re une vidÃ©o dont chaque image est dÃ©calÃ©e de 0.25 pixels</p>
</li>
<li>
<p>Panneau : gÃ©nÃ¨re une seule image, un panneau oÃ¹ chaque case correspond Ã  un dÃ©calage de pixels diffÃ©rent</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="pixel-shift-panel.jpg" alt="Example of panel">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mesures_avec_lanalyseur_de_vidÃ©o">Mesures avec l&#8217;analyseur de vidÃ©o</h3>
<div class="paragraph">
<p>JSol&#8217;Ex propose un outil permettant de visualiser la dÃ©tection des lignes spectrales sur une vidÃ©o.
Cet outil peut Ãªtre utilisÃ© pour trouver, par exemple, le dÃ©calage de pixels Ã  appliquer pour trouver la raie hÃ©lium.</p>
</div>
<div class="paragraph">
<p>Pour se faire, ouvrez une vidÃ©o en cliquant sur "Outils &#8594; Analyseur de vidÃ©o".
Le logiciel va calculer l&#8217;image moyenne pour la vidÃ©o puis vous prÃ©senter cette fenÃªtre:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="spectral-debug-1-fr.jpg" alt="spectral debug 1 fr">
</div>
</div>
<div class="paragraph">
<p>En haut, vous voyez l&#8217;image moyenne.
La ligne rouge correspond Ã  la ligne spectrale dÃ©tectÃ©e.
Sous la ligne violette s&#8217;affiche une image <em>corrigÃ©e en fonction du polynÃ´me</em> : ceci vous permet de vÃ©rifier facilement si le polynÃ´me est correct: l&#8217;image du bas doit avoir des lignes spectrales parfaitement horizontales.</p>
</div>
<div class="paragraph">
<p>Dans la partie basse de l&#8217;interface, vous trouverez:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le bouton radio "Moyenne / Images" qui permet de basculer entre l&#8217;image moyenne et les images individuelles du film SER</p>
</li>
<li>
<p>lorsque "Images" est sÃ©lectionnÃ©, le slider Ã  droite permet de naviguer dans la vidÃ©o</p>
</li>
<li>
<p>le seuil de dÃ©tection du soleil peut Ãªtre changÃ© (non recommandÃ©, le logiciel ne permet pas de modifier cette valeur, c&#8217;est un mode expert)</p>
</li>
<li>
<p>la case "vÃ©rouiller le polynÃ´me" permet de figer la dÃ©tection de ligne spectrale sur l&#8217;image actuelle : elle nous sera utile pour les mesures de distances</p>
</li>
<li>
<p>le slider "contraste" permet d&#8217;augmenter le contraste et la luminositÃ© de l&#8217;image (transformation arcsin hyperbolique)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_application_au_calcul_de_dÃ©calage_de_la_raie_hÃ©lium">Application au calcul de dÃ©calage de la raie hÃ©lium</h3>
<div class="paragraph">
<p>Nous supposerons ici que notre fichier SER est une vidÃ©o incluant Ã  la fois la raie spectrale HÃ©lium et une autre raie suffisamment sombre pour Ãªtre bien dÃ©tectÃ©e par JSol&#8217;Ex.</p>
</div>
<div class="paragraph">
<p>Nous pouvons alors procÃ©der par Ã©tapes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vÃ©rouiller le polynÃ´me sur l&#8217;image moyenne</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="spectral-debug-2-fr.jpg" alt="spectral debug 2 fr">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>sÃ©lectionner le mode "Images"</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="spectral-debug-3-fr.jpg" alt="spectral debug 3 fr">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Augmenter le contraste</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="spectral-debug-4-fr.jpg" alt="spectral debug 4 fr">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Choisir une image au bord du limbe</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="spectral-debug-5-fr.jpg" alt="spectral debug 5 fr">
</div>
</div>
<div class="paragraph">
<p>Nous pouvons dÃ©sormais effectuer des mesures.
Lorsque vous dÃ©placez la souris sur l&#8217;image, des coordonnÃ©es s&#8217;affichent :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="spectral-debug-6-fr.jpg" alt="spectral debug 6 fr">
</div>
</div>
<div class="paragraph">
<p>Les 2 premiers nombres sont les coordonnÃ©es (x,y) du point sous le curseur de la souris.
Le 3Ã¨me nombre est celui qui nous intÃ©resse : c&#8217;est le dÃ©calage en pixels entre le point sous le curseur et la ligne spectrale en rouge.</p>
</div>
<div class="paragraph">
<p>Le 4Ã¨me nombre nous permet d&#8217;obtenir une mesure plus prÃ©cise, en calculant une moyenne sur un nombre d&#8217;Ã©chantillons.</p>
</div>
<div class="paragraph">
<p>Pour ajouter un Ã©chantillon, trouvez un point sur la raie hÃ©lium et appuyez sur "CTRL" tout en cliquant.
Vous pouvez ajouter autant de points que vous le souhaitez:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="spectral-debug-7-fr.jpg" alt="spectral debug 7 fr">
</div>
</div>
<div class="paragraph">
<p>Le 4Ã¨me nombre reprÃ©sente la distance moyenne calculÃ©e.
<strong>Nous en dÃ©duisons que le dÃ©calage de pixels Ã  appliquer est de -134</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="stacking-and-mosaic">Empilement et crÃ©ation de mosaiques</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JSol&#8217;Ex dispose d&#8217;un outil permettant d&#8217;empiler des images et de crÃ©er des mosaÃ¯ques.
Les 2 outils sont trÃ¨s similaires, mais l&#8217;empilement est plus simple Ã  utiliser.
L&#8217;empilement consiste Ã  prendre plusieurs images de la mÃªme rÃ©gion du soleil et Ã  en faire une seule image, en alignant les dÃ©tails et en moyennant les pixels.
La mosaÃ¯que consiste Ã  prendre plusieurs images de rÃ©gions diffÃ©rentes du soleil et Ã  les assembler pour former une image plus grande.</p>
</div>
<div class="paragraph">
<p>Les 2 outils sont disponibles en passant par le menu "Outils" puis "Empilement et crÃ©ation de mosaÃ¯ques".</p>
</div>
<div class="paragraph">
<p>La fenÃªtre qui s&#8217;ouvre est la suivante:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="stacking-1-fr.jpg" alt="stacking 1 fr">
</div>
</div>
<div class="paragraph">
<p>A gauche, vous pouvez crÃ©er des panneaux d&#8217;images Ã  empiler.
Si vous ne crÃ©ez qu&#8217;un seul panneau, il s&#8217;agira d&#8217;un empilement simple.
Si vous crÃ©er plusieurs panneaux, il s&#8217;agira d&#8217;une mosaÃ¯que.
Un panneau contiendra une ou plusieurs images, qui seront empilÃ©es ensemble.
Pour crÃ©er un panneau, vous pouvez, au choix:
- cliquer sur le bouton "+" et sÃ©lectionner les images Ã  empiler
- faire un glisser-dÃ©poser d&#8217;une ou plusieurs images depuis votre explorateur de fichiers</p>
</div>
<div class="imageblock">
<div class="content">
<img src="stacking-2-fr.jpg" alt="stacking 2 fr">
</div>
</div>
<div class="paragraph">
<p>Dans l&#8217;image ci-dessus, nous avons crÃ©Ã© 2 panneaux.
Le premier contient 3 images qui seront empilÃ©es pour faire le panneau nord, et le second contient 2 images qui seront empilÃ©es pour faire le panneau sud.</p>
</div>
<div class="paragraph">
<p>Les options d&#8217;empilement sont visibles Ã  droite.
Il n&#8217;est pas recommandÃ© de les modifier, sauf si vous savez ce que vous faites.
Les options sont les suivantes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la taille des tuiles permet de dÃ©couper l&#8217;image en tuiles pour l&#8217;empilement. Plus la taille est petite, plus l&#8217;empilement sera prÃ©cis mais le calcul sera plus long et il ne sera pas possible de dÃ©couvrir des dÃ©calages importants entre les images.</p>
</li>
<li>
<p>l&#8217;Ã©chantillonage permet de dÃ©terminer oÃ¹ seront pris les Ã©chantillons servant Ã  calculer le modÃ¨le de distorsion. Un facteur de 0.5 combinÃ© Ã  des tuiles de 32 pixels signifie par exemple un Ã©chantillon tous les 16 pixels.</p>
</li>
<li>
<p>Forcer le recalcul des ellipses permet de recalculer l&#8217;ellipse (ou le cercle) du disque solaire pour chaque image. Ceci est utile notamment si vous utilisez des images venant d&#8217;un autre logiciel ou que les ellipses ont Ã©tÃ© mal dÃ©tectÃ©es.</p>
</li>
<li>
<p>Corriger la gÃ©omÃ©trie permet de rendre le disque solaire parfaitement circulaire, ce qui est gÃ©nÃ©ralement une bonne idÃ©e si les images que vous importez n&#8217;ont pas Ã©tÃ© corrigÃ©es.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le script de post-traitement vous permet de sÃ©lectionner un script <code>ImageMath</code> Ã  appliquer Ã  chaque image aprÃ¨s empilement.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Dans un script de post-traitement, l&#8217;image empilÃ©e est disponible sous le nom de <code>image</code>. Par exemple, vous pouvez crÃ©er un script qui appliquera une dÃ©convolution en utilisant la formule <code>rl_decon(image)</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les autres options disponibles sont celles de sÃ©lection des formats de fichier.
Si vous avez crÃ©Ã© plusieurs panneaux, nous passons alors en mode mosaÃ¯que.
Non seulement les images seront empilÃ©es dans chaque panneau, mais chaque image empilÃ©e sera ensuite assemblÃ©e pour former une mosaÃ¯que.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Il est recommandÃ© de ne PAS utiliser d&#8217;images traitÃ©es (par exemple avec amÃ©lioration de contraste) pour la crÃ©ation de mosaÃ¯ques. En effet, ces images sont plus difficiles Ã  aligner. Il est donc recommandÃ© d&#8217;utiliser les images <code>recon</code> (corrigÃ©e gÃ©omÃ©triquement) ou <code>raw</code> (brute).
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="stacking-3-fr.jpg" alt="stacking 3 fr">
</div>
</div>
<div class="paragraph">
<p>Si vous souhaitez simplement empiler des images sans faire de mosaique, vous pouvez dÃ©sactiver l&#8217;option "CrÃ©er la mosaÃ¯que".
Dans le cas contraire, vous disposez de paramÃ¨tres qu&#8217;il est possible de modifier, encore une fois, si vous savez ce que vous faites.
Nous recommandons de ne pas changer la taille des tuiles et le chevauchement pour la mosaÃ¯que, sauf si vous obtenez des images dÃ©formÃ©es ou non reconstruites.</p>
</div>
<div class="paragraph">
<p>Vous pouvez aussi choisir un script de post-traitement Ã  appliquer aprÃ¨s la crÃ©ation de la mosaÃ¯que.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_calculatrice_dexposition_optimale">Calculatrice d&#8217;exposition optimale</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dans le menu "Outils", vous trouverez la calculatrice d&#8217;exposition optimale.
Cette calculatrice vous permet de dÃ©terminer le temps d&#8217;exposition optimal que vous devrez utiliser pour obtenir une image du soleil parfaitement ronde et Ã©viter le sous-Ã©chantillonage.</p>
</div>
<div class="paragraph">
<p>Entrez :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la taille des pixels de votre camÃ©ra et le binning utilisÃ©</p>
</li>
<li>
<p>la longueur focale de votre instrument</p>
</li>
<li>
<p>la vitesse du scan (en multiple de la vitesse sidÃ©rale, par exemple 2, 4, 8, &#8230;&#8203;)</p>
</li>
<li>
<p>la date d&#8217;observation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le logiciel calculera alors le framerate recommandÃ© annsi que l&#8217;exposition optimale en fonction de ces paramÃ¨tres, en millisecondes.</p>
</div>
<div class="paragraph">
<p>Notez que vous pouvez changer le type de spectrohÃ©liographe utilisÃ©, ce qui peut changer le calcul de l&#8217;exposition optimale.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_explorateur_de_spectre">Explorateur de spectre</h2>
<div class="sectionbody">
<div class="paragraph">
<p>L&#8217;explorateur de spectre est disponible dans le menu "Outils".
Il permet de visualiser l&#8217;aspect du spectre tel qu&#8217;il serait vu dans un logiciel de capture tel que SharpCap ou FireCapture.
Il vous permet de vous "promener" dans le spectre :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="spectrum-browser-1.jpg" alt="spectrum browser 1">
</div>
</div>
<div class="paragraph">
<p>Dans la case "Longueur d&#8217;onde", vous pouvez saisir une longueur d&#8217;onde en AngstrÃ¶ms.
En cliquant sur "Aller" ou en tapant entrÃ©e, le spectre sera automatiquement centrÃ© autour de cette longueur d&#8217;onde :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="spectrum-browser-2.jpg" alt="spectrum browser 2">
</div>
</div>
<div class="paragraph">
<p>Une ligne pointillÃ©e bleue est ajoutÃ©e, vous permettant de bien repÃ©rer la ligne.</p>
</div>
<div class="paragraph">
<p>Alternativement, vous pouvez rechercher directement une ligne spectrale remarquable en la sÃ©lectionnant dans la boÃ®te Ã  cÃ´tÃ© du bouton "Aller".</p>
</div>
<div class="paragraph">
<p>Lorsque vous cliquez sur "Coloriser", le spectre est alors colorisÃ© de faÃ§on Ã  vous donner une idÃ©e d&#8217;oÃ¹ vous vous situez dans le spectre visible (nous recommandons cependant de rester en niveaux de gris pour repÃ©rer prÃ©cisÃ©ment une raie) :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="spectrum-browser-3.jpg" alt="spectrum browser 3">
</div>
</div>
<div class="paragraph">
<p>Sur la deuxiÃ¨me ligne, vous avez la possibilitÃ© de choisir le spectrohÃ©liographe qui a Ã©tÃ© utilisÃ© (celui-ci aura une influence sur la dispersion spectrale calculÃ©e), ainsi que de prÃ©ciser la taille des pixels (pensez Ã  multiplier par le <em>binning</em>).</p>
</div>
<div class="paragraph">
<p>Si vous cochez la case "Ajuster dispersion", la dimension du spectre est automatiquement ajustÃ©e pour correspondre prÃ©cisÃ©ment Ã  la dispersion par pixel.</p>
</div>
<div class="paragraph">
<p>Vous pouvez zoomer soit en cliquant sur les boutons "+" et "-", ou, plus simplement, en appuyant sur "CTRL" et en faisant tourner votre molette de souris.
Si vous zoomez, l&#8217;ajustement automatique est dÃ©sactivÃ© (puisqu&#8217;il ne correspond plus Ã  la dispersion exacte par pixel).</p>
</div>
<div class="sect2">
<h3 id="_identification_automatique">Identification automatique</h3>
<div class="paragraph">
<p>Enfin, JSol&#8217;Ex propose une fonctionnalitÃ© encore expÃ©rimentale : vous pouvez cliquer sur le bouton "Identifier" pour ouvrir une fenÃªtre de sÃ©lection de fichier.</p>
</div>
<div class="paragraph">
<p>Choisissez alors une image du spectre, telle que capturÃ©e par votre logiciel.
JSol&#8217;Ex essayera alors de retrouver dans quelle partie du spectre elle se trouve :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="spectrum-browser-4.jpg" alt="spectrum browser 4">
</div>
</div>
<div class="paragraph">
<p>Si l&#8217;identification fonctionne, votre image sera affichÃ©e en transparence, par dessus le spectre, sur la partie gauche de l&#8217;image, ce qui vous permettra de vÃ©rifier facilement si l&#8217;identification a rÃ©ussi.</p>
</div>
<div class="paragraph">
<p>Vous pouvez masquer l&#8217;image en transparence en cliquant sur le bouton "Cacher".</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_serveur_web_embarquÃ©">Serveur Web embarquÃ©</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dans le menu "Outils", vous trouverez la possibilitÃ© de lancer un serveur web embarquÃ©.
Ce serveur permet de voir les images traitÃ©es par le logiciel depuis d&#8217;autres ordinateurs, en se connectant Ã  ce serveur.</p>
</div>
<div class="paragraph">
<p>Cette fonctionalitÃ© peut-Ãªtre particuliÃ¨rement pratique lors de projections publiques, en ayant un ordinateur utilisant JSol&#8217;Ex pour l&#8217;acquisition des images et un autre ordinateur sur le mÃªme rÃ©seau pour la projection sur un Ã©cran.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="embedded-server-1-fr.jpg" alt="embedded server 1 fr">
</div>
</div>
<div class="paragraph">
<p>Vous pouvez configurer le port sur lequel le serveur Ã©coute et disposez de la possibilitÃ© de le lancer automatiquement au dÃ©marrage du logiciel.</p>
</div>
<div class="paragraph">
<p>L&#8217;interface donne accÃ¨s aux images en cours de traitement ainsi qu&#8217;Ã  leur historique, au cas oÃ¹ vous traitez plusieurs images successivement.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="embedded-server-2-fr.jpg" alt="embedded server 2 fr">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_remerciements">Remerciements</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Christian Buil pour avoir conÃ§u le Sol&#8217;Ex et diriger la communautÃ© d&#8217;une main de maÃ®tre</p>
</li>
<li>
<p>ValÃ©rie Desnoux pour son travail remarquable sur INTI</p>
</li>
<li>
<p>Jean-FranÃ§ois Pittet pour ses rapports de bugs, ses vidÃ©os de test et ses formules de correction gÃ©omÃ©trique</p>
</li>
<li>
<p>Sylvain Weiller pour son beta-testing intensif, ses retours prÃ©cieux et ses idÃ©es de traitement</p>
</li>
<li>
<p>Ken M. Harrison pour l&#8217;amÃ©lioration des calculs d&#8217;exposition optimale</p>
</li>
<li>
<p>Minh Trong Nguyen pour ses suggestions d&#8217;amÃ©lioration et son travail sur le SHG 700</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<script src="highlight/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>